# TPC-H SQL 查询生成器

使用 TPC-H 生成复杂 SQL 测试查询。

## 核心限制

TPC-H 只有 **22 个固定模板**，无法扩展。

## 解决方案

通过改变随机种子，每个模板可以生成不同参数的查询变体。

**原理:**
- 模板 1 + 种子 1 → `interval '68' day`
- 模板 1 + 种子 2 → `interval '76' day`
- 模板 1 + 种子 3 → `interval '84' day`

同一模板，不同种子，生成不同参数的唯一查询。

## 使用方法

```bash
# 生成 22 个查询（默认）
python3 generate_queries.py

# 生成 100 个唯一查询
python3 generate_queries.py 100

# 生成 1000 个唯一查询
python3 generate_queries.py 1000
```

## 命名规则

文件命名: `query_<模板号>_<变体号>.sql`

**示例:**
```
query_1_0.sql   (模板 1, 种子 1)
query_1_1.sql   (模板 1, 种子 2)
query_1_2.sql   (模板 1, 种子 3)
query_2_0.sql   (模板 2, 种子 1)
...
```

## 变化内容

每个变体中随机化的参数:
- 日期范围和间隔
- 数字阈值
- 折扣百分比
- 数量限制
- 字符串模式
- 地区/国家筛选

## 性能

- 100 个查询: <1 秒
- 1000 个查询: ~4 秒
- 10000 个查询: ~40 秒

## 技术细节

每次运行自动清空之前生成的查询，使用 `qgen -r <seed>` 标志控制参数随机化。
